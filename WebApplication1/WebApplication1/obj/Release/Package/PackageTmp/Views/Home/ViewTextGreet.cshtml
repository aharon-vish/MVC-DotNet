@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>ViewTextGreet</title>


    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    @*<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>*@
    <script src="~/Scripts/jquery-2.1.4.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>


    <link href="~/Content/editor.css" rel="stylesheet" />
    <script src="~/Scripts/editor.js"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
</head>
<body>
    <div id="TextGreet" class="container text-center" >
        <div id="txtEditor">
            <script type="text/javascript">
                var FirstFocus = 0;
                $("#txtEditor").Editor();
                if (FirstFocus)
                $("div.Editor-editor").append("<b>Write here your greeting.....</b>");


                $("#TextEditor").focusout(function () {
                    if ($("#link").length) {
                        console.log("exist");
                        $("canvas").remove();
                        $("#link").remove();
                        html2canvas([document.getElementById('TextEditor')], {
                            onrendered: function (canvas) {

                                var GreeDiv = document.getElementById('TextGreet');
                                var link = document.createElement('a');
                                link.id = 'link';
                                link.innerHTML = 'download image';

                                link.href = canvas.toDataURL();
                                link.download = "mypainting.png";
                                GreeDiv.appendChild(link);
                            }
                        });
                    }
                    else {
                        console.log("dont texist");
                        html2canvas([document.getElementById('TextEditor')], {
                            onrendered: function (canvas) {
                               // document.body.appendChild(canvas);
                                var GreeDiv = document.getElementById('TextGreet');
                                var link = document.createElement('a');
                                link.id = 'link';
                                link.innerHTML = 'download image';

                                link.href = canvas.toDataURL();
                                link.download = "mypainting.png";
                                GreeDiv.appendChild(link);
                            }
                        });
                    }
                });
            </script>
        </div>
    </div>
</body>
</html>
